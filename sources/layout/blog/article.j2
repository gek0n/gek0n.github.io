{% import "macros.j2" as macros with context %}
<!doctype html>
<html lang="en">
  <head>
    <title>Blog{% if resource.meta.title-%} | {{resource.meta.title}} {%-endif %}</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="{{ media_url('css/style.css') }}">
    <link rel="stylesheet" href="{{ media_url('css/w3.css') }}">
    <link rel="stylesheet" href="{{ media_url('css/blog/article.css') }}">
    <link rel="stylesheet" href="{{ media_url('css/font-awesome.min.css') }}">
    <link href="http://fonts.googleapis.com/css?family=Anton"
            rel="stylesheet" type="text/css">

    <!-- Turn on code highlighting -->
    <link rel="stylesheet" href="{{ media_url('css/highlight/hybrid.css') }}">
    <script src="/media/js/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <meta name="author" content="{{author.name}}" />
    <meta name="description" content="{{resource.meta.description}}" />
{% for item in soft %}
    <meta name="generator" content="{{item["name"]}} {{item["version"]}}" />
{% endfor %}
    <meta name="keywords" content="{{resource.meta.keywords}}" />
  </head>
  <body onload="addW3ClassesToImages();">
    {{ macros.render_main_menu() }}
    <header class="w3-container w3-center w3-padding-64 w3-xxlarge w3-mobile">
      {{resource.meta.title}}
    </header>
    
    <article class="w3-content w3-justify w3-container w3-col m11 l10" id="article">
      {% filter markdown -%}
      {% block article %}{% endblock %}
      {%- endfilter %}
    </article>
    <button onclick="backToTopFunc()" id="backToTop" class="w3-btn w3-circle w3-red w3-large backToTop" title="Go to top">
      <i class="fa fa-chevron-circle-up w3-xxxlarge"></i>
    </button>
    <footer class="w3-row-padding w3-center w3-padding-16">
      <div class="w3-row">
        <div class="w3-third">
          <h3>About</h3>
        </div>
        <div class="w3-third">
          <h3>Recent posts</h3>
          {{ macros.render_recent_posts() }}
        </div>
        <div class="w3-third">
          <h3>Tags</h3>
          {{ macros.render_tags_cloud() }}
        </div>
      </div>
      <div class="w3-wide w3-opacity w3-tiny w3-text-dark-grey">
        Generated with <a href="https://github.com/hyde/hyde">the Hyde</a>
        <br>
        Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a>
      </div>
    </footer>
    <script>
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
      if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
        document.getElementById("backToTop").style.display = "block";
      } else {
        document.getElementById("backToTop").style.display = "none";
      }
    }

    function backToTopFunc() {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }

    function toogleNavMenu() {
      var smallMenu = document.getElementById("smallMenu");
      if (smallMenu.className.indexOf("w3-show") == -1) {
        smallMenu.className += " w3-show";
      } else {
        smallMenu.className = smallMenu.className.replace(" w3-show", "");
      }
    }

    function addW3ClassesToImages() {
      var imgs = document.getElementById("article").getElementsByTagName("img");
      for (i = 0; i < imgs.length; i++) {
        console.log(imgs[i].src);
        imgs[i].className += " w3-card";
        imgs[i].className += " w3-image";
      }
    }
    </script>
  </body>
</html>